!function(t){var e={};function i(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(r,s,function(e){return t[e]}.bind(null,s));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);class r{constructor(){}setContext(t){this.gl=t}bind(){this.buf.bind();var t=0;this.layout.elements.forEach((e,i)=>{this.gl.vertexAttribPointer(i,e.count,e.type,e.normalized,this.layout.stride,t),this.gl.enableVertexAttribArray(i),t+=e.count*this.layout.getElementTypeSize(e.type)})}unbind(){}addBuffer(t,e){this.layout=e,this.buf=t}}class s{setContext(t){this.gl=t}constructor(){}createBuffer(t){this.vbo=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vbo),this.gl.bufferData(this.gl.ARRAY_BUFFER,t,this.gl.STATIC_DRAW)}destruct(){this.gl.deleteBuffer(this.vbo)}bind(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vbo)}unbind(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,0)}}class h{setContext(t){this.gl=t}constructor(){}createBuffer(t){this.ibo=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.ibo),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,t,this.gl.STATIC_DRAW)}destruct(){this.gl.deleteBuffer(this.ibo)}bind(){this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.ibo)}unbind(){this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,0)}}class n{constructor(){this.elements=[],this.stride=0}setContext(t){this.gl=t}getElementTypeSize(t){switch(t){case this.gl.FLOAT:return Float32Array.BYTES_PER_ELEMENT;case this.gl.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case this.gl.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT}throw`AGL: Unknown buffer element type ${t}`}addFloat(t){this.elements.push({type:this.gl.FLOAT,count:t,normalized:!1}),this.stride+=t*Float32Array.BYTES_PER_ELEMENT}addUint(t){this.elements.push({type:this.gl.UNSIGNED_INT,count:t,normalized:!1}),this.stride+=t*Uint32Array.BYTES_PER_ELEMENT}addUchar(t){this.elements.push({type:this.gl.UNSIGNED_BYTE,count:t,normalized:!1}),this.stride+=t*Uint8Array.BYTES_PER_ELEMENT}}var a={VertexArray:r,Display:class{setContext(t){this.gl=t}draw(t,e){e.bind(),t.bind(),this.gl.drawElements(this.gl.TRIANGLES,t.getIndicesLength(),this.gl.UNSIGNED_SHORT,0)}clearColor(t,e,i,r){this.gl.clearColor(t,e,i,r)}clear(){this.gl.clear(this.gl.DEPTH_BUFFER_BIT|this.gl.COLOR_BUFFER_BIT)}enableCulling(t){t?(this.gl.enable(this.gl.DEPTH_TEST),this.gl.enable(this.gl.CULL_FACE),this.gl.frontFace(this.gl.CCW),this.gl.cullFace(this.gl.BACK)):(this.gl.disable(this.gl.DEPTH_TEST),this.gl.disable(this.gl.CULL_FACE),this.gl.frontFace(this.gl.CCW),this.gl.cullFace(this.gl.BACK))}},VertexBuffer:s,IndexBuffer:h,Shader:class{constructor(t){this.types={Vertex:0,Fragment:1},this.type=t}setContext(t){this.gl=t}toGLType(t){switch(t){case this.types.Vertex:return this.gl.VERTEX_SHADER;case this.types.Fragment:return this.gl.FRAGMENT_SHADER}throw`AGL: Unknown shader type ${t}`}typeString(t){switch(t){case this.types.Vertex:return"vertex";case this.types.Fragment:return"fragment"}throw`AGL: Unknown shader type ${t}`}compile(t){var e;if(this.shaderId=this.gl.createShader(this.toGLType(this.type)),this.gl.shaderSource(this.shaderId,t),this.gl.compileShader(this.shaderId),!this.gl.getShaderParameter(this.shaderId,this.gl.COMPILE_STATUS))throw e=this.gl.getShaderInfoLog(this.shaderId),`AGL: Error compiling ${this.typeString(this.type)} shader: ${e}`}destruct(){this.gl.deleteShader(this.shaderId)}},ShaderProgram:class{constructor(){this.ufCache=[]}setContext(t){this.gl=t}create(){this.progid=this.gl.createProgram()}createFrom(t,e){this.attachShader(t),this.attachShader(e),this.link()}destruct(){this.gl.deleteProgram(this.progid)}bind(){this.gl.useProgram(this.progid)}unbind(){this.gl.useProgram(0)}attachShader(t){this.gl.attachShader(this.progid,t.shaderId)}link(){if(this.gl.linkProgram(this.progid),!this.gl.getProgramParameter(this.progid,this.gl.LINK_STATUS))throw"AGL: Error linking program";if(this.gl.validateProgram(this.progid),!this.gl.getProgramParameter(this.progid,this.gl.VALIDATE_STATUS))throw"AGL: Error validating program"}getUniformLocation(t){var e=this.ufCache[t];if(void 0!==e)return e;var i=this.gl.getUniformLocation(this.progid,t);return-1!==i?(this.ufCache[t]=i,this.ufCache[t]):i}getSafeUniformLocation(t){var e=this.getUniformLocation(t);if(-1==e)throw"AGL: Cannot find uniform, it's either not used or not declared";return e}setUniform1i(t,e){var i=this.getSafeUniformLocation(t);this.gl.uniform1i(i,e)}setUniform1f(t,e){var i=this.getSafeUniformLocation(t);this.gl.uniform1f(i,e)}setUniform2f(t,e,i){var r=this.getSafeUniformLocation(t);this.gl.uniform2f(r,e,i)}setUniform3f(t,e,i,r){var s=this.getSafeUniformLocation(t);this.gl.uniform3f(s,e,i,r)}setUniform4f(t,e,i,r,s){var h=this.getSafeUniformLocation(t);this.gl.uniform4f(h,e,i,r,s)}setUniformMatrix2f(t,e,i=!1){var r=this.getSafeUniformLocation(t);this.gl.uniformMatrix2fv(r,i,e)}setUniformMatrix3f(t,e,i=!1){var r=this.getSafeUniformLocation(t);this.gl.uniformMatrix3fv(r,i,e)}setUniformMatrix4f(t,e,i=!1){var r=this.getSafeUniformLocation(t);this.gl.uniformMatrix4fv(r,i,e)}},Texture:class{constructor(){this.texId=0}setContext(t){this.gl=t}fromImage(t){this.texId=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texId),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,t),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texId)}bind(t=0){this.gl.activeTexture(this.gl.TEXTURE0+t),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texId)}destruct(){this.gl.deleteTexture(this.texId)}},BufferLayout:n,Mesh:class{constructor(t=null,e=null){this.create(t,e)}create(t,e){this.vao=t,this.ibo=e}createFromObject(t){var e=new n;e.setContext(this.gl),t.layout.forEach(t=>{if("float"==t[0])e.addFloat(t[1]);else if("uint"==t[0]||"unsigned int"==t[0])e.addUint(t[1]);else{if("uchar"!=t[0]&&"unsigned char"!=t[0])throw`AGL: uncaught layout element type: ${t[0]}, avalible types: float, uint | unsigned int, uchar | unsigned char`;e.addUchar(t[1])}});var i=new s;i.setContext(this.gl),i.createBuffer(new Float32Array(t.buffer)),this.vao=new r,this.ibo=new h,this.vao.setContext(this.gl),this.ibo.setContext(this.gl),this.ibo.createBuffer(new Uint16Array(t.indices)),this.vao.addBuffer(i,e),this.indicesLength=t.indices.length}setContext(t){this.gl=t}setTexture(t){this.tex=t}getIndicesLength(){return this.indicesLength}bind(){this.vao.bind(),this.ibo.bind(),void 0!==this.tex&&this.tex.bind()}unbind(){this.vao.unbind(),this.ibo.unbind()}destruct(){this.vao.destruct(),this.ibo.destruct(),void 0!==this.tex&&this.tex.destruct(),delete this.vao,delete this.ibo,void 0!==this.tex&&delete this.tex}}};window.AGLWizard=class{constructor(t=null){this.gl=t}setContext(t){this.gl=t}createBufferLayout(){var t=new a.BufferLayout;return t.setContext(this.gl),t}createMesh(t=null,e=null){var i=new a.Mesh(t,e);return i.setContext(this.gl),i}createDisplay(){var t=new a.Display;return t.setContext(this.gl),t}createIndexBuffer(){var t=new a.IndexBuffer;return t.setContext(this.gl),t}createShader(t){var e=new a.Shader(t);return e.setContext(this.gl),e}createShaderProgram(){var t=new a.ShaderProgram;return t.setContext(this.gl),t.create(),t}createTexture(){var t=new a.Texture;return t.setContext(this.gl),t}createVertexArray(){var t=new a.VertexArray;return t.setContext(this.gl),t}createVertexBuffer(){var t=new a.VertexBuffer;return t.setContext(this.gl),t}},window.agl=a}]);